(globalThis.webpackChunk_openmrs_esm_patient_forms_app=globalThis.webpackChunk_openmrs_esm_patient_forms_app||[]).push([[930,249],{4761:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(272),o=r.n(n),i=r(2609),a=r.n(i)()(o());a.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}:root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-forms__offline-forms-overview-card__productiveHeading01___dMZ_L,.-esm-patient-forms__offline-forms-overview-card__overviewCard___Hva4e .-esm-patient-forms__offline-forms-overview-card__heading___L2EOh{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}.-esm-patient-forms__offline-forms-overview-card__productiveHeading03___QS6NH{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-patient-forms__offline-forms-overview-card__productiveHeading04___IjpLo{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-patient-forms__offline-forms-overview-card__bodyLong01___Cm1zR{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-patient-forms__offline-forms-overview-card__bodyShort01___HY5lg{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-patient-forms__offline-forms-overview-card__label01___TgmoK{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}.-esm-patient-forms__offline-forms-overview-card__overviewCard___Hva4e{border:1px solid #e0e0e0;height:8.625rem}.-esm-patient-forms__offline-forms-overview-card__overviewCard___Hva4e .-esm-patient-forms__offline-forms-overview-card__heading___L2EOh{color:#525252}.-esm-patient-forms__offline-forms-overview-card__overviewCard___Hva4e .-esm-patient-forms__offline-forms-overview-card__headerContainer___ieMYk{display:flex;justify-content:space-between;align-items:center}.-esm-patient-forms__offline-forms-overview-card__overviewCard___Hva4e .-esm-patient-forms__offline-forms-overview-card__contentContainer___Q7lr6{display:flex;justify-content:space-between;margin-top:1.5rem}.-esm-patient-forms__offline-forms-overview-card__overviewCard___Hva4e .-esm-patient-forms__offline-forms-overview-card__viewButton___a47Fx{margin-top:-0.25rem;margin-right:-1rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/root.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./src/offline-forms/offline-forms-overview-card.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CAHF,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,uNC81BI,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CD11BJ,8EC01BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDt1BJ,8ECs1BI,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CAAA,sDAAA,CDl1BJ,qECk1BI,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CD90BJ,sEC80BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD10BJ,kEC00BI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CC91BJ,uEACE,wBAAA,CACA,eAAA,CAEA,yIAEE,aHLM,CGQR,iJACE,YAAA,CACA,6BAAA,CACA,kBAAA,CAGF,kJACE,YAAA,CACA,6BAAA,CACA,iBCcS,CDXX,4IACE,mBAAA,CACA,kBAAA",sourceRoot:""}]),a.locals={productiveHeading01:"-esm-patient-forms__offline-forms-overview-card__productiveHeading01___dMZ_L",overviewCard:"-esm-patient-forms__offline-forms-overview-card__overviewCard___Hva4e",heading:"-esm-patient-forms__offline-forms-overview-card__heading___L2EOh",productiveHeading03:"-esm-patient-forms__offline-forms-overview-card__productiveHeading03___QS6NH",productiveHeading04:"-esm-patient-forms__offline-forms-overview-card__productiveHeading04___IjpLo",bodyLong01:"-esm-patient-forms__offline-forms-overview-card__bodyLong01___Cm1zR",bodyShort01:"-esm-patient-forms__offline-forms-overview-card__bodyShort01___HY5lg",label01:"-esm-patient-forms__offline-forms-overview-card__label01___TgmoK",headerContainer:"-esm-patient-forms__offline-forms-overview-card__headerContainer___ieMYk",contentContainer:"-esm-patient-forms__offline-forms-overview-card__contentContainer___Q7lr6",viewButton:"-esm-patient-forms__offline-forms-overview-card__viewButton___a47Fx"};const s=a},5497:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(272),o=r.n(n),i=r(2609),a=r.n(i)()(o());a.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}:root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-forms__offline-forms-styles__productiveHeading01___VR54s{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}.-esm-patient-forms__offline-forms-styles__productiveHeading03___ES52X,.-esm-patient-forms__offline-forms-styles__pageHeaderContainer___ecJQd .-esm-patient-forms__offline-forms-styles__pageHeader___svGcH{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-patient-forms__offline-forms-styles__productiveHeading04___du0_u{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-patient-forms__offline-forms-styles__bodyLong01___i3PY8{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-patient-forms__offline-forms-styles__bodyShort01___S0vYz{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-patient-forms__offline-forms-styles__label01___xfyMv{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}.-esm-patient-forms__offline-forms-styles__pageHeaderContainer___ecJQd{display:flex;justify-content:space-between;align-items:center;margin:0 1rem 1rem 1rem}.-esm-patient-forms__offline-forms-styles__pageHeaderContainer___ecJQd .-esm-patient-forms__offline-forms-styles__pageHeader___svGcH{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.-esm-patient-forms__offline-forms-styles__contentContainer___lLDEj{margin:0 1rem}.-esm-patient-forms__offline-forms-styles__tableHeaderContainer___cPVP8{display:grid;grid-template-columns:1fr 50%}.-esm-patient-forms__offline-forms-styles__tableHeaderContainer___cPVP8 .-esm-patient-forms__offline-forms-styles__tableSearch___GZer3{grid-column:2;align-self:end}.omrs-breakpoint-gt-tablet .-esm-patient-forms__offline-forms-styles__tableHeaderContainer___cPVP8{grid-template-columns:1fr 250px}.omrs-breakpoint-gt-tablet .-esm-patient-forms__offline-forms-styles__tableHeaderContainer___cPVP8 .-esm-patient-forms__offline-forms-styles__tableSearch___GZer3{grid-column:3}.-esm-patient-forms__offline-forms-styles__availableOfflineToggle___w_RVf .cds--toggle__switch{margin-top:0 !important}.-esm-patient-forms__offline-forms-styles__availableOfflineToggle___w_RVf .cds--toggle__label-text{display:none}.-esm-patient-forms__offline-forms-styles__availableOfflineToggleSkeleton___hD9xS{width:2rem;height:1rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/root.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./src/offline-forms/offline-forms.styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CAHF,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,uEC81BI,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CD11BJ,4MC01BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDt1BJ,uECs1BI,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CAAA,sDAAA,CDl1BJ,8DCk1BI,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CD90BJ,+DC80BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD10BJ,2DC00BI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CC71BJ,uEACE,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,uBAAA,CAEA,qIAEE,sBAAA,CACA,eAAA,CACA,kBAAA,CAIJ,oEACE,aAAA,CAGF,wEACE,YAAA,CACA,6BAAA,CAEA,uIACE,aAAA,CACA,cAAA,CAIJ,mGACE,+BAAA,CAEA,kKACE,aAAA,CAKF,+FAKE,uBAAA,CAGF,mGACE,YAAA,CAIJ,kFACE,UCfW,CDgBX,WC1BW",sourceRoot:""}]),a.locals={productiveHeading01:"-esm-patient-forms__offline-forms-styles__productiveHeading01___VR54s",productiveHeading03:"-esm-patient-forms__offline-forms-styles__productiveHeading03___ES52X",pageHeaderContainer:"-esm-patient-forms__offline-forms-styles__pageHeaderContainer___ecJQd",pageHeader:"-esm-patient-forms__offline-forms-styles__pageHeader___svGcH",productiveHeading04:"-esm-patient-forms__offline-forms-styles__productiveHeading04___du0_u",bodyLong01:"-esm-patient-forms__offline-forms-styles__bodyLong01___i3PY8",bodyShort01:"-esm-patient-forms__offline-forms-styles__bodyShort01___S0vYz",label01:"-esm-patient-forms__offline-forms-styles__label01___xfyMv",contentContainer:"-esm-patient-forms__offline-forms-styles__contentContainer___lLDEj",tableHeaderContainer:"-esm-patient-forms__offline-forms-styles__tableHeaderContainer___cPVP8",tableSearch:"-esm-patient-forms__offline-forms-styles__tableSearch___GZer3",availableOfflineToggle:"-esm-patient-forms__offline-forms-styles__availableOfflineToggle___w_RVf",availableOfflineToggleSkeleton:"-esm-patient-forms__offline-forms-styles__availableOfflineToggleSkeleton___hD9xS"};const s=a},8179:(e,t,r)=>{"use strict";r.d(t,{HW:()=>a,_V:()=>o,dr:()=>s,lA:()=>i});var n="(uuid,name,display,encounterType:(uuid,name,viewPrivilege,editPrivilege),version,published,retired,resources:(uuid,name,dataType,valueReference))",o="custom:(uuid,encounterDatetime,encounterType:(uuid,name,viewPrivilege,editPrivilege),form:".concat(n),i="/ws/rest/v1/form?v=custom:".concat(n),a="/ws/rest/v1/form?v=custom:".concat(n,"&q=poc"),s="patient-form-entry-workspace"},4450:(e,t,r)=>{"use strict";r.d(t,{MS:()=>d,cq:()=>m});var n=r(3565),o=r.n(n),i=r(3255),a=r(2870),s=r(8179),l=r(5186);function c(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){c(i,n,o,a,s,"next",e)}function s(e){c(i,n,o,a,s,"throw",e)}a(void 0)}))}}function m(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=(0,a.useConfig)(),n=r.customFormsUrl,o=r.showHtmlFormEntryForms,l=Boolean(n),c=l?n.concat("?patientUuid=".concat(t)):o?s.lA:s.HW;return(0,i.ZP)([c,e],f((function(){var t,r,n,o,i,s;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(f){switch(f.label){case 0:return[4,(0,a.openmrsFetch)(c)];case 1:return n=f.sent(),i=l?null==n?void 0:n.data.results:null!==(o=null===(r=n.data)||void 0===r||null===(t=r.results)||void 0===t?void 0:t.filter((function(e){return e.published&&!/component/i.test(e.name)})))&&void 0!==o?o:[],e?[4,(0,a.getDynamicOfflineDataEntries)("form")]:[2,i];case 2:return s=f.sent(),[2,i.filter((function(e){return s.some((function(t){return t.identifier===e.uuid}))}))]}}))})))}var u=new Date(0);function d(e,t,r){var n,c,f,d,p,_=arguments.length>3&&void 0!==arguments[3]&&arguments[3],A=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"name",v=(0,a.useConfig)().htmlFormEntryForms,h=m(_,e),g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o()(new Date).startOf("day").subtract(500,"day").toDate(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o()(new Date).endOf("day").toDate(),n=e?"/ws/rest/v1/encounter?v=".concat(s._V,"&patient=").concat(e,"&fromdate=").concat(t.toISOString(),"&todate=").concat(r.toISOString()):null;return(0,i.ZP)(n,a.openmrsFetch)}(e,t,r),y=null!==(f=null===(c=g.data)||void 0===c||null===(n=c.data)||void 0===n?void 0:n.results)&&void 0!==f?f:[],b=h.data?(d=h.data,p=y,d.map((function(e){var t=p.filter((function(t){var r;return(null===(r=t.form)||void 0===r?void 0:r.uuid)===(null==e?void 0:e.uuid)})),r=t.length>0?new Date(null==t?void 0:t[0].encounterDatetime):void 0;return{form:e,associatedEncounters:t,lastCompleted:r}}))):void 0,w=(0,a.useSession)(),C=_?null==b?void 0:b.filter((function(e){return(0,l.LD)(e.form,v)})):b;return(null==w?void 0:w.user)&&(C=null==C?void 0:C.filter((function(e){var t,r,n;return(0,a.userHasAccess)(null==e||null===(n=e.form)||void 0===n||null===(r=n.encounterType)||void 0===r||null===(t=r.editPrivilege)||void 0===t?void 0:t.display,w.user)}))),"name"===A?null==C||C.sort((function(e,t){var r,n;return(null!==(r=e.form.display)&&void 0!==r?r:e.form.name).localeCompare(null!==(n=t.form.display)&&void 0!==n?n:t.form.name)})):null==C||C.sort((function(e,t){var r,n;return(null!==(r=e.lastCompleted)&&void 0!==r?r:u).getDate()-(null!==(n=t.lastCompleted)&&void 0!==n?n:u).getDate()})),{data:C,error:h.error,isValidating:h.isValidating||g.isValidating,allForms:h.data,mutateForms:function(){h.mutate(),g.mutate()}}}},6930:(e,t,r)=>{"use strict";r.r(t),r.d(t,{clinicalFormActionMenu:()=>ce,importTranslation:()=>se,offlineFormOverviewCard:()=>fe,offlineForms:()=>ue,offlineFormsNavLink:()=>me,startupApp:()=>le});var n=r(2870),o=r(2821),i={htmlFormEntryForms:{_type:n.Type.Array,_elements:{formUuid:{_type:n.Type.String,_description:"The UUID of the form"},formName:{_type:n.Type.String,_description:"The name of the form"},formUiResource:{_type:n.Type.String,_description:'The resource file that defines the form. For example "referenceapplication:htmlforms/vitals.xml"'},formUiPage:{_type:n.Type.String,_description:'The HTMLFormEntry page to use to show this form. Should be one of "enterHtmlFormWithStandardUi" or "enterHtmlFormWithSimpleUi"',_validators:[(0,n.validator)((function(e){return"string"==typeof e&&("enterHtmlFormWithStandardUi"===e||"enterHtmlFormWithSimpleUi"===e)}),'Must be one of "enterHtmlFormWithStandardUi" or "enterHtmlFormWithSimpleUi"')]},formEditUiPage:{_type:n.Type.String,_description:'The HTMLFormEntry page to use to edit this form. Should be one of "editHtmlFormWithStandardUi" or "editHtmlFormWithSimpleUi"',_validators:[(0,n.validator)((function(e){return"string"==typeof e&&("editHtmlFormWithStandardUi"===e||"editHtmlFormWithSimpleUi"===e)}),'Must be one of "enterHtmlFormWithStandardUi" or "editHtmlFormWithSimpleUi"')]}},_default:[{formUuid:"d2c7532c-fb01-11e2-8ff2-fd54ab5fdb2a",formName:"Admission (Simple)",formUiResource:"referenceapplication:htmlforms/simpleAdmission.xml",formUiPage:"enterHtmlFormWithStandardUi",formEditUiPage:"editHtmlFormWithStandardUi"},{formUuid:"b5f8ffd8-fbde-11e2-8ff2-fd54ab5fdb2a",formName:"Discharge (Simple)",formUiResource:"referenceapplication:htmlforms/simpleDischarge.xml",formUiPage:"enterHtmlFormWithStandardUi",formEditUiPage:"editHtmlFormWithStandardUi"},{formUuid:"a007bbfe-fbe5-11e2-8ff2-fd54ab5fdb2a",formName:"Transfer Within Hospital (Simple)",formUiResource:"referenceapplication:htmlforms/simpleTransfer.xml",formUiPage:"enterHtmlFormWithStandardUi",formEditUiPage:"editHtmlFormWithStandardUi"},{formUuid:"c75f120a-04ec-11e3-8780-2b40bef9a44b",formName:"Visit Note",formUiResource:"referenceapplication:htmlforms/simpleVisitNote.xml",formUiPage:"enterHtmlFormWithStandardUi",formEditUiPage:"editHtmlFormWithStandardUi"},{formUuid:"a000cb34-9ec1-4344-a1c8-f692232f6edd",formName:"Vitals",formUiResource:"referenceapplication:htmlforms/vitals.xml",formUiPage:"enterHtmlFormWithSimpleUi",formEditUiPage:"editHtmlFormWithSimpleUi"}]},showHtmlFormEntryForms:{_type:n.Type.Boolean,_default:!0,_description:"Whether HTML Form Entry forms should be included in lists of forms."},customFormsUrl:{_type:n.Type.String,_description:"Custom forms endpoint to fetch forms using a custom url.",_default:""},orderBy:{_type:n.Type.String,_description:'Describes how forms should be ordered. Set to "name" to order forms alphabetically by name or "most-recent" to order forms by the most recently filled-in.',_default:"name",_validators:[(0,n.validator)((function(e){return"string"==typeof e&&("name"===e||"most-recent"===e)}),"orderBy must be either 'name' or 'most-recent'")]},formSections:{_type:n.Type.Array,_elements:{name:{_type:n.Type.String,_description:"Name of the section. Also used as a label for translations.",_validators:[(0,n.validator)((function(e){return"string"==typeof e&&""!==e.trim()}),"Each form section must have a name.")]},forms:{_type:n.Type.Array,_description:"List of forms to be included in this section. Each form should be specified as a form name or UUID.",_elements:{_type:n.Type.String,_description:"Name or UUID of form to be included in the section",_validators:[(0,n.validator)((function(e){return"string"==typeof e&&""!==e.trim()}),"Each form must be specified by name or UUID.")]},_default:[]}},_default:[]}},a=r(8179),s=r(8407);function l(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){l(i,n,o,a,s,"next",e)}function s(e){l(i,n,o,a,s,"throw",e)}a(void 0)}))}}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var u="patient-form";function d(){return(d=c((function(){return m(this,(function(e){return(0,n.setupOfflineSync)(u,["visit"],p,{onBeginEditSyncItem:function(e){(0,o.launchFormEntry)(e.content.formSchemaUuid,e.descriptor.patientUuid,e.content._id,"Form Entry")}}),[2]}))}))).apply(this,arguments)}function p(e,t){return _.apply(this,arguments)}function _(){return _=c((function(e,t){var r,n,o,i;return m(this,(function(a){switch(a.label){case 0:return r=t.dependencies[0],n=e._payloads,o=n.encounterCreate,i=n.personUpdate,[4,Promise.all([A(r,o),h(null==i?void 0:i.uuid,i)])];case 1:return a.sent(),[2]}}))})),_.apply(this,arguments)}function A(e,t){return v.apply(this,arguments)}function v(){return v=c((function(e,t){var r,o;return m(this,(function(i){switch(i.label){case 0:return t?(a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){f(e,t,r[t])}))}return e}({},t),s=null!=(s={encounterDatetime:null!==(r=t.encounterDatetime)&&void 0!==r?r:null==e?void 0:e.stopDatetime})?s:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(s)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(s,e))})),o=a,[4,(0,n.openmrsFetch)("/ws/rest/v1/encounter",{headers:{"Content-Type":"application/json"},method:"POST",body:o})]):[2];case 1:return i.sent(),[2]}var a,s}))})),v.apply(this,arguments)}function h(e,t){return g.apply(this,arguments)}function g(){return(g=c((function(e,t){return m(this,(function(r){switch(r.label){case 0:return e&&t?[4,(0,n.openmrsFetch)("/ws/rest/v1/person/".concat(e),{headers:{"Content-Type":"application/json"},method:"POST",body:t})]:[2];case 1:return r.sent(),[2]}}))}))).apply(this,arguments)}function y(){return y=c((function(){return m(this,(function(e){return(0,n.setupDynamicOfflineDataHandler)({id:"esm-patient-forms-app:form",type:"form",displayName:"Patient forms",isSynced:function(e){return c((function(){var t,r,o;return m(this,(function(i){switch(i.label){case 0:return[4,b(e)];case 1:return t=i.sent(),r=t.map((function(e){return window.origin+(0,n.makeUrl)(e)})),[4,caches.open("omrs-spa-cache-v1")];case 2:return[4,i.sent().keys()];case 3:return o=i.sent().map((function(e){return e.url})),[2,r.every((function(e){return o.includes(e)}))]}}))}))()},sync:function(e){return c((function(){var t;return m(this,(function(r){switch(r.label){case 0:return[4,b(e)];case 1:return t=r.sent(),[4,Promise.allSettled(t.map((o=c((function(e){return m(this,(function(t){switch(t.label){case 0:return[4,(0,n.messageOmrsServiceWorker)({type:"registerDynamicRoute",pattern:(0,s.Z)(e),strategy:"network-first"})];case 1:return t.sent(),[4,(0,n.openmrsFetch)(e,{headers:f({},n.omrsOfflineCachingStrategyHttpHeaderName,"network-first")})];case 2:return t.sent(),[2]}}))})),function(e){return o.apply(this,arguments)})))];case 2:if(r.sent().some((function(e){return"rejected"===e.status})))throw new Error("Some form data could not be properly downloaded. (Form UUID: ".concat(e,")"));return[2]}var o}))}))()}}),[2]}))})),y.apply(this,arguments)}function b(e){return w.apply(this,arguments)}function w(){return(w=c((function(e){return m(this,(function(t){switch(t.label){case 0:return[4,(0,n.openmrsFetch)("/ws/rest/v1/form/".concat(e,"?v=full"))];case 1:if(!t.sent().data)throw new Error("The form data could not be loaded from the server. (Form UUID: ".concat(e,")"));return[2,[a.lA,a.HW].filter(Boolean)]}}))}))).apply(this,arguments)}var C=r(268),S=r.n(C),O=r(5362),E=r(4924);var D=r(9160),H=r(8871),P=r(5186),k=r(321),F=r.n(k),j=r(1195),T=r.n(j),B=r(3275),U=r.n(B),x=r(7162),N=r.n(x),Z=r(2094),I=r.n(Z),L=r(757),z=r.n(L),W=r(4761),J={};J.styleTagTransform=z(),J.setAttributes=N(),J.insert=U().bind(null,"head"),J.domAPI=T(),J.insertStyleElement=I(),F()(W.Z,J);const M=W.Z&&W.Z.locals?W.Z.locals:void 0;function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(e){var t=e.header,r=e.children,n=e.isLoading,o=void 0!==n&&n;return S().createElement("div",null,S().createElement("h4",{className:M.label01},t),o?S().createElement(D.N2B,{heading:!0}):S().createElement("span",{className:M.productiveHeading04},r))};var Y=r(4450);function G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(){var e,t,r,o=(0,Y.cq)(),i=(0,n.useConfig)();return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){G(e,t,r[t])}))}return e}({},o),r=null!=(r={data:null===(e=o.data)||void 0===e?void 0:e.filter((function(e){return(0,P.LD)(e,i.htmlFormEntryForms)}))})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})),t}var q=r(5497),K={};K.styleTagTransform=z(),K.setAttributes=N(),K.insert=U().bind(null,"head"),K.domAPI=T(),K.insertStyleElement=I(),F()(q.Z,K);const X=q.Z&&q.Z.locals?q.Z.locals:void 0;function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ee(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){te(e,t,r[t])}))}return e}function ne(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function oe(e){var t,r,o,i,a,s=e.form,l=e.disabled,c=(0,E.useTranslation)().t,f=(i=(0,C.useState)(!1),a=2,function(e){if(Array.isArray(e))return e}(i)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(i,a)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(e,t):void 0}}(i,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=f[0],u=f[1],d=(0,P.nY)(),p=null===(t=d.data)||void 0===t?void 0:t.some((function(e){return e.identifier===s.uuid})),_=(r=function(e){return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(t){switch(t.label){case 0:u(!0),t.label=1;case 1:return t.trys.push([1,,7,8]),e?[4,(0,n.putDynamicOfflineData)("form",s.uuid)]:[3,4];case 2:return t.sent(),[4,(0,n.syncDynamicOfflineData)("form",s.uuid)];case 3:return t.sent(),[3,6];case 4:return[4,(0,n.removeDynamicOfflineData)("form",s.uuid)];case 5:t.sent(),t.label=6;case 6:return[3,8];case 7:return u(!1),d.mutate(),[7];case 8:return[2]}}))},o=function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function a(e){ee(i,n,o,a,s,"next",e)}function s(e){ee(i,n,o,a,s,"throw",e)}a(void 0)}))},function(e){return o.apply(this,arguments)});return d.isValidating?S().createElement(D.uKo,{className:X.availableOfflineToggleSkeleton}):S().createElement("div",null,S().createElement(D.ZDl,{"aria-label":c("offlineToggle","Offline toggle"),id:"".concat(s.uuid,"-offline-toggle"),className:X.availableOfflineToggle,labelA:"",labelB:"",labelText:"",size:"sm",toggled:p,disabled:l||m||d.isValidating,onToggle:_}))}var ie="@openmrs/esm-patient-forms-app",ae={featureName:"patient-forms",moduleName:ie},se=r(3979);function le(){(0,n.defineConfigSchema)(ie,i),(0,n.registerBreadcrumbs)([{path:"".concat(window.spaBase,"/offline-tools/forms"),title:"Offline forms",parent:"".concat(window.spaBase,"/offline-tools")}]),function(){d.apply(this,arguments)}(),function(){y.apply(this,arguments)}(),(0,n.subscribePrecacheStaticDependencies)((function(){return(0,n.syncAllDynamicOfflineData)("form")})),(0,o.registerWorkspace)({name:"patient-form-entry-workspace",title:(0,n.translateFrom)(ie,"clinicalForm","Clinical Form"),load:(0,n.getAsyncLifecycle)((function(){return r.e(513).then(r.bind(r,6513))}),ae),canMaximize:!0,canHide:!0,width:"wider",type:"clinical-form"}),(0,o.registerWorkspace)({name:"clinical-forms-workspace",title:(0,n.translateFrom)(ie,"clinicalForms","Clinical Forms"),load:(0,n.getAsyncLifecycle)((function(){return r.e(208).then(r.bind(r,8208))}),ae),type:"clinical-form",width:"wider"})}var ce=(0,n.getSyncLifecycle)((function(){var e=(0,E.useTranslation)().t,t=(0,o.useWorkspaces)().workspaces,r=(0,o.useLaunchWorkspaceRequiringVisit)("clinical-forms-workspace"),n=t.filter((function(e){return e.name===a.dr})),i=n[0],s=(null==n?void 0:n.length)>=1;return S().createElement(o.SiderailNavButton,{name:"clinical-form-action-menu",getIcon:function(e){return S().createElement(O.BB,e)},label:e("clinicalForms","Clinical forms"),iconDescription:e("clinicalForms","Clinical forms"),handler:function(){var e;s?(0,o.launchPatientWorkspace)("patient-form-entry-workspace",{workspaceTitle:null==i||null===(e=i.additionalProps)||void 0===e?void 0:e.workspaceTitle}):r()},type:"clinical-form"})}),ae),fe=(0,n.getSyncLifecycle)((function(){var e=(0,E.useTranslation)().t,t=(0,P.nY)(),r=t.data,o=t.error;return S().createElement(D.mh4,null,S().createElement(D.n9L,{className:M.overviewCard},S().createElement("div",{className:M.headerContainer},S().createElement("h3",{className:M.heading},e("forms","Forms")),S().createElement(D.zxk,{className:M.viewButton,kind:"ghost",renderIcon:function(e){return S().createElement(H.ol,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){V(e,t,r[t])}))}return e}({size:16},e))},size:"sm",onClick:function(){return(0,n.navigate)({to:"${openmrsSpaBase}/offline-tools/forms"})}},e("homeOverviewCardView","View"))),S().createElement("div",{className:M.contentContainer},S().createElement(R,{header:e("offlineFormsOverviewCardAvailableOffline","Available offline"),isLoading:!o&&!r},o?"Unknown":null==r?void 0:r.length))))}),ae),me=(0,n.getSyncLifecycle)((function(){return t=(e={page:"forms",title:"Offline forms"}).page,r=e.title,S().createElement("div",{key:t},S().createElement(n.ConfigurableLink,{to:"${openmrsSpaBase}/offline-tools"+(t?"/".concat(t):""),className:"cds--side-nav__link"},r));var e,t,r}),ae),ue=(0,n.getSyncLifecycle)((function(){var e=(0,E.useTranslation)().t,t=(0,n.useSession)(),r=Q(),i=(0,n.useLayoutType)(),a=(0,n.useConnectivity)(),s=(0,n.isDesktop)(i)?"sm":void 0,l=[{key:"formName",header:e("offlineFormsTableFormNameHeader","Form name")},{key:"availableOffline",header:e("offlineFormsTableFormAvailableOffline","Offline")}],c=(0,C.useMemo)((function(){var e,o,i=null==r||null===(e=r.data)||void 0===e?void 0:e.filter((function(e){var r,o;return(0,n.userHasAccess)(null==e||null===(o=e.encounterType)||void 0===o||null===(r=o.editPrivilege)||void 0===r?void 0:r.display,null==t?void 0:t.user)})),s=null==i||null===(o=i.map((function(e){return{id:e.uuid,formName:e.display,availableOffline:S().createElement(oe,{form:e,disabled:!a})}})))||void 0===o?void 0:o.sort((function(e,t){return e.formName.localeCompare(t.formName)}));return null!=s?s:[]}),[r.data,t.user,a]);return 0===c.length?S().createElement("div",{className:X.contentContainer},S().createElement(o.EmptyState,{displayText:e("offlineForms__lower","offline forms"),headerTitle:e("offlineForms","Offline forms")})):S().createElement(S().Fragment,null,S().createElement("header",{className:X.pageHeaderContainer},S().createElement("h1",{className:X.pageHeader},e("offlineFormsTitle","Offline forms"))),S().createElement("main",{className:X.contentContainer},S().createElement(D.wQF,{rows:c,headers:l,size:"sm",useZebraStyles:!0},(function(t){var r=t.rows,n=t.headers,o=t.getTableProps,i=t.getHeaderProps,a=t.getRowProps,l=t.getTableContainerProps,c=t.onInputChange;return S().createElement(D.xJi,l(),S().createElement("div",{className:X.tableHeaderContainer},S().createElement(D.mh4,null,S().createElement(D.olm,{className:X.tableSearch,labelText:e("offlinePatientsTableSearchLabel","Search this list"),placeholder:e("offlinePatientsTableSearchPlaceholder","Search this list"),size:s,onChange:c}))),S().createElement(D.iA_,ne(re({},o()),{isSortable:!0,useZebraStyles:!0}),S().createElement(D.ssF,null,S().createElement(D.SCH,null,n.map((function(e){return S().createElement(D.xDH,ne(re({},i({header:e})),{isSortable:!0}),e.header)})))),S().createElement(D.RMI,null,r.map((function(e){return S().createElement(D.SCH,a({row:e}),e.cells.map((function(e){var t,r;return S().createElement(D.pj1,{key:e.id},null!==(r=null===(t=e.value)||void 0===t?void 0:t.value)&&void 0!==r?r:e.value)})))})))))}))))}),ae)},5186:(e,t,r)=>{"use strict";r.d(t,{LD:()=>i,nY:()=>s});var n=r(3255),o=r(2870);function i(e,t){var r=t.some((function(t){return t.formUuid===e.uuid})),n=e.resources.some(a);return!r&&n}function a(e){return"AmpathJsonSchema"===e.dataType||"JSON schema"===e.name}function s(){return(0,n.ZP)("dynamicFormEntries",(function(){return(0,o.getDynamicOfflineDataEntries)("form")}))}},3979:(e,t,r)=>{var n={"./am.json":[8788,788],"./ar.json":[4460,460],"./en.json":[3574,574],"./es.json":[8319,319],"./fr.json":[2757,757],"./he.json":[5833,833],"./km.json":[7807,807],"./zh.json":[8271,271],"./zh_CN.json":[1644,644]};function o(e){if(!r.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return r.e(t[1]).then((()=>r(o)))}o.keys=()=>Object.keys(n),o.id=3979,e.exports=o},187:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r(3221).Z.Symbol},8147:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(187),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=n.Z?n.Z.toStringTag:void 0;var l=Object.prototype.toString;var c=n.Z?n.Z.toStringTag:void 0;const f=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":c&&c in Object(e)?function(e){var t=i.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var o=a.call(e);return n&&(t?e[s]=r:delete e[s]),o}(e):function(e){return l.call(e)}(e)}},2168:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n="object"==typeof global&&global&&global.Object===Object&&global},3221:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(2168),o="object"==typeof self&&self&&self.Object===Object&&self;const i=n.Z||o||Function("return this")()},8407:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(4020),o=/[\\^$.*+?()[\]{}|]/g,i=RegExp(o.source);const a=function(e){return(e=(0,n.Z)(e))&&i.test(e)?e.replace(o,"\\$&"):e}},7885:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=Array.isArray},3391:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return null!=e&&"object"==typeof e}},2758:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(8147),o=r(3391);const i=function(e){return"symbol"==typeof e||(0,o.Z)(e)&&"[object Symbol]"==(0,n.Z)(e)}},4020:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(187);var o=r(7885),i=r(2758),a=n.Z?n.Z.prototype:void 0,s=a?a.toString:void 0;const l=function e(t){if("string"==typeof t)return t;if((0,o.Z)(t))return function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(t,e)+"";if((0,i.Z)(t))return s?s.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},c=function(e){return null==e?"":l(e)}}}]);